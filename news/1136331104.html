<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Creating subdomains from directories using mod_rewrite in Apache .htaccess - HM2K</title>
<link href="news.css" rel="stylesheet" type="text/css">
</head>
<body><center><p><a href="/" title="HM2K"><img src="/img/hm2k.gif" alt="HM2K" width="150" height="80" border="0"></a></p><table border="0" cellspacing="1" cellpadding="3" width="80%">
<tr>
<td width="100%">
<h1><img style="border: none;" alt="Web Dev icon" src="/img/webdev.gif" />Creating subdomains from directories using mod_rewrite in Apache .htaccess</h1>
</td>
</tr>
<tr>
<td width="100%">
<font style="color:#666; font-size:14;">The idea was to have the ability to create unlimited subdomains simply by creating an appropreate directory for it in your html root directory.<br /><br />Since most people don't have direct access to their httpd.conf, the obvious solution was to create a method using mod_rewrite within ".htaccess". This also allowed it to be setup very easily and quickly.<br /><br />I have no immediate use for this solution, however I know it will come in very handy in the future.<br /><br />Someone I know was trying to figure this out earlier today, so I took it upon myself to figure out how to work out a solution for this problem.<br /><br />After much discussion with #apache @ EFnet, in particular TBF, we came about the following solution.<br /><br /> <blockquote><div style="font-size: 13px;">quote:</div><hr style="border: 1px solid #ACA899;" /><div>#Grab the subdomain from the domain<br />RewriteCond %{HTTP_HOST} ^([^.]+).hm2k.org$<br />#Make sure the subdomain is not www or example<br />RewriteCond %{1} !^(www&#124;example)$<br />#Check if the directory actually exists before we go there<br />RewriteCond /home/hm2k/public_html/%1 -d<br />#This stops it from looping<br />RewriteCond %{REQUEST_FILENAME} !^/home/hm2k/public_html/<br />#Finally, this is the actual rewrite<br />RewriteRule (.*) /home/hm2k/public_html/%1/$1 [Last]</div><hr style="border: 1px solid #ACA899;" /></blockquote><br /><br />Thanks to all those who helped, I hope this comes in useful to someone.</font></td>
</tr>
<tr>
<td width="100%">
<table border="0" style="border-top: 1px dotted #f2f3f3" width="90%" cellspacing="0">
<tr>
<td><i><font style="font-size:11;	color:black;">03 Jan 2006 by HM2K</font></i><br> </td><td><div align=right>
<font style="font-size:11;"><a href="#" onclick="window.open('/news/show_news.php?subaction=showcomments&amp;template=HM2K&amp;id=1136331104&amp;archive=&amp;start_from=&amp;ucat=16', '_News', 'HEIGHT=400,WIDTH=650,resizable=yes,scrollbars=yes');return false;">1 comments</a></font><br> 
</div>
</td>
</tr>
</table>
</td>
</tr>
</table>
<p>Note: Comments are disabled.</p>
<br /><table border="0" width="90%" height="40" cellspacing="" cellpadding="3">
    <tr>
      <td height="1" style="border-bottom-style: solid;border-bottom-width: 1px; border-bottom-color: black;">by <b><a  href="mailto:submod@c-zone.nu">CHJ</a></b> @ 20 Feb 2006 08:52 pm</td>
    </tr>
    <tr>
      <td height="40" valign="top" bgcolor="#F9F9F9" ><a name="1140468777"></a>I have tested this in Apache/2.0.54 (Fedora) and it is not working for me. No errors no go. <br /> <br />I have set the domain resolving and a serveralias for *.domain <br /> <br />But it does not resolve the subdomains. <br /> <br />Please advise.</td>
    </tr>
  </table>
<br><form  onsubmit="return CNSubmitComment()"  method="post" name="comment" id="comment" action="">        Comments are disabled
<div><input type="hidden" name="subaction" value="addcomment" /><input type="hidden" name="ucat" value="" /><input type="hidden" name="show" value="" /></div></form>
                    
 <script type="text/javascript" src="/news/remember.js"></script><script>CNreadCookie();</script><p class="footer">Copyright &copy; 2004-2005 <a href="/">HM2K</a>. All Rights Reserved.</p></center></body>
</html>